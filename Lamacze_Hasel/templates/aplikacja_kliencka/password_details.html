<head lang="pl">
    {% load staticfiles %}
    <link rel="stylesheet" href="/static/css/bootstrap.css"/>
    <link rel="stylesheet" href="/static/css/bootstrap-theme.css"/>
    <link rel="stylesheet" href="/static/css/jquery-ui.css"/>
    <link rel="stylesheet" href="/static/css/jquery-ui.theme.css"/>
    <link rel="stylesheet" href="/static/css/jquery-ui.structure.css"/>
    <link rel="stylesheet" href="/static/jqGRID/css/ui.jqgrid.css"/>
    <script src="/static/js/jquery-2.1.3.js" type="text/javascript"></script>
    <script src="/static/js/bootstrap.js" type="text/javascript"></script>
    <script src="/static/jqGRID/js/i18n/grid.locale-pl.js" type="text/javascript"></script>
    <script src="/static/jqGRID/js/jquery-1.11.0.min.js" type="text/javascript"></script>
    <script src="/static/jqGRID/js/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script src="/static/js/jquery-ui.min.js" type="text/javascript"></script>
    <meta charset="UTF-8">
    <title>{% block title %}Łamacze Haseł{% endblock %}</title>
</head>
<body>
    <p> Numer hasła: {{ password.id }}</p>
    <p> Algorytm hashowania: {{ password.algorithm }}</p>
    <p> Metoda rozwiązania: {{ password.password_cracking_algorithm }}</p>
    <p> Data rozpoczęcia: {{ task.start_time}}</p>
    <p> Hash: {{ password.hash}}</p>
    <p id="password"> Hasło:{{ password.password}}</p>
    {% if password.end_time %}
    <p> Data zakończenia: {{ password.end_time }}</p>
    {% endif %}
    <p> Status </p>
    <div class="container">
      <div class="progress" style="margin: 2% ">
        <div class="progress-bar progress-bar-striped active" id="progress_bar" role="progressbar"
             aria-valuenow="{{ password.status }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ password.status }}%">
          {{ password.status }}%
        </div>
      </div>
    </div>
    <script>
    $(document).ready(
            function() {
                setInterval(function() {

                    var id = "{{ password.id }}";
                    var url = "/get_password_status/";
                    $.ajax({
                        url: url,
                        type: "POST",
                        data: {'id': id},
                        success: function(data){
                            message = '<span class="' + data.status + '">' + data.result + '</span> ';
                            message = ( data.status == 'success' ) ? message + data.fileLink : message;
                            status = data.password_status + "%";
                            $("#progress_bar").text(status).css({"width":status, "aria_valuenow": data.password_status});
                            $("#password").text("Hasło: " + data.password );

                        }
                   })
                }, 3000);
            });
    </script>
</body>